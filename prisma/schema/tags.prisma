model Tag {
  id               String   @id @default(uuid()) @map("tag_id")
  tagName          String   @unique @map("tag_name")
  tagType          TagType  @map("tag_type")
  tagColor         String?  @map("tag_color")
  description      String?  @map("description") @db.Text
  displayOrder     Int      @default(0) @map("display_order")
  isActive         Boolean  @default(true) @map("is_active")
  createdAt        DateTime @default(now()) @map("created_at")
  updatedAt        DateTime @updatedAt @map("updated_at")
  createdByAdminId String?  @map("created_by_admin_id")

  // Relations
  createdByAdmin User?        @relation("TagCreator", fields: [createdByAdminId], references: [id], onDelete: SetNull)
  listingTags    ListingTag[]

  @@index([tagType])
  @@index([isActive])
  @@index([displayOrder])
  @@map("tags")
}

model ListingTag {
  id                String   @id @default(uuid()) @map("listing_tag_id")
  listingId         String   @map("listing_id")
  tagId             String   @map("tag_id")
  assignedByAdminId String?  @map("assigned_by_admin_id")
  assignedAt        DateTime @default(now()) @map("assigned_at")
  isActive          Boolean  @default(true) @map("is_active")
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")

  // Relations
  listing         Listing @relation(fields: [listingId], references: [id], onDelete: Cascade)
  tag             Tag     @relation(fields: [tagId], references: [id], onDelete: Cascade)
  assignedByAdmin User?   @relation("TagAssigner", fields: [assignedByAdminId], references: [id], onDelete: SetNull)

  @@unique([listingId, tagId])
  @@index([listingId])
  @@index([tagId])
  @@index([isActive])
  @@map("listing_tags")
}
